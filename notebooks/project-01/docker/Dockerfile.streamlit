FROM python:3.12-slim

WORKDIR /app

# Copy only the necessary files for Streamlit
COPY pyproject.toml .
COPY config/ ./config/
COPY streamlit/ ./streamlit/

# Install dependencies
RUN pip install poetry
RUN poetry config virtualenvs.create false
RUN poetry install --no-dev

# Install Streamlit
RUN poetry add streamlit

# Set environment variables
ENV PYTHONPATH=/app

# Expose the port Streamlit runs on
EXPOSE 8501

# Run the Streamlit app
CMD ["streamlit", "run", "streamlit/app.py"]
